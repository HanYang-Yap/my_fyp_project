{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file://D%3A/GitHub/fyp_flask_project/frontend/src/firebase/config.js"],"sourcesContent":["import { initializeApp } from 'firebase/app';\r\nimport { getFirestore } from 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"your-api-key\",\r\n  authDomain: \"your-auth-domain\",\r\n  projectId: \"your-project-id\",\r\n  storageBucket: \"your-storage-bucket\",\r\n  messagingSenderId: \"your-messaging-sender-id\",\r\n  appId: \"your-app-id\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\n\r\nexport { db }; "],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;AACT;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE;AAC1B,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file://D%3A/GitHub/fyp_flask_project/frontend/src/app/portfolioUpload/page.js"],"sourcesContent":["'use client';\nimport { useState, useEffect } from 'react';\nimport { db } from '../../firebase/config';\nimport { collection, query, where, getDocs } from 'firebase/firestore';\nimport '@/../public/css/portfolioUpload.css'; // 確保 CSS 路徑正確\n\nexport default function PortfolioUpload() {\n  const [targetSchools, setTargetSchools] = useState([]);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedSchool, setSelectedSchool] = useState('');\n  const [documentType, setDocumentType] = useState('learning');\n  const [activeCategory, setActiveCategory] = useState('all');\n  const [files, setFiles] = useState([\n    // 這裡可以之後從 Firebase 獲取檔案列表\n    {\n      id: 1,\n      name: '臺灣大學-資訊工程學系-學習歷程自述.pdf',\n      size: '4.2 MB',\n      uploadDate: '2025/03/18',\n      status: 'analyzed',\n      analysisDate: '2025/03/19',\n      score: 92,\n      school: 'ntu-csie',\n      type: 'learning'\n    },\n    // ... 其他檔案\n  ]);\n\n  useEffect(() => {\n    const fetchTargetSchools = async () => {\n      try {\n        const schoolsRef = collection(db, 'targetSchools');\n        const q = query(schoolsRef, where('userId', '==', 'currentUserId')); // 替換成實際用戶 ID\n        const querySnapshot = await getDocs(q);\n        \n        const schools = [];\n        querySnapshot.forEach((doc) => {\n          schools.push({ id: doc.id, ...doc.data() });\n        });\n        \n        setTargetSchools(schools);\n      } catch (error) {\n        console.error('Error:', error);\n      }\n    };\n\n    fetchTargetSchools();\n  }, []);\n\n  const handleFileUpload = (event) => {\n    const file = event.target.files[0];\n    setSelectedFile(file);\n    setIsModalOpen(true);\n  };\n\n  const handleConfirmUpload = () => {\n    if (!selectedSchool) {\n      alert('請選擇志願學校');\n      return;\n    }\n\n    if (!selectedFile) {\n      document.getElementById('fileUpload').click();\n      return;\n    }\n\n    // 這裡處理檔案上傳邏輯\n    alert(`文件「${selectedFile.name}」上傳成功！`);\n    setIsModalOpen(false);\n    setSelectedFile(null);\n    setSelectedSchool('');\n  };\n\n  const handleCategoryClick = (category) => {\n    setActiveCategory(category);\n  };\n\n  const handleAnalyzeClick = () => {\n    const selectedFileInput = document.querySelector('input[name=\"fileSelect\"]:checked');\n    if (selectedFileInput) {\n      const fileItem = selectedFileInput.closest('.file-item');\n      const fileName = fileItem.querySelector('.file-name').textContent;\n      const fileStatus = fileItem.querySelector('.file-status');\n\n      localStorage.setItem('currentAnalysis', JSON.stringify({\n        fileName: fileName,\n        timestamp: new Date().getTime()\n      }));\n\n      if (fileStatus.classList.contains('status-analyzed')) {\n        if (confirm('此文件已經分析過，確定要重新分析嗎？')) {\n          window.location.href = '/initAnalysis';\n        }\n      } else {\n        window.location.href = '/initAnalysis';\n      }\n    } else {\n      alert('請先選擇一個要分析的文件');\n    }\n  };\n\n  return (\n    <div className=\"main-content\">\n      <div className=\"content-container\">\n        <div className=\"page-header\">\n          <h1 className=\"page-title\">學習歷程</h1>\n        </div>\n        \n        <div className=\"portfolio-container\">\n          {/* 左側類別選擇 */}\n          <div className=\"portfolio-sidebar\">\n            <h3 className=\"category-title\">志願學校系所</h3>\n            <ul className=\"category-list\">\n              <li \n                className={`category-item ${activeCategory === 'all' ? 'active' : ''}`}\n                onClick={() => handleCategoryClick('all')}\n              >\n                <i className=\"fas fa-list\"></i> 所有文件\n              </li>\n              {targetSchools.map((school) => (\n                <li \n                  key={school.id} \n                  className={`category-item ${activeCategory === school.code ? 'active' : ''}`}\n                  onClick={() => handleCategoryClick(school.code)}\n                >\n                  <i className=\"fas fa-university\"></i> {school.name}\n                </li>\n              ))}\n            </ul>\n          </div>\n          \n          {/* 右側內容 */}\n          <div className=\"portfolio-content\">\n            {/* 上傳區域 */}\n            <div className=\"upload-section\" id=\"uploadArea\">\n              <div className=\"upload-icon\">\n                <i className=\"fas fa-cloud-upload-alt\"></i>\n              </div>\n              <h3 className=\"upload-title\">上傳你的學習歷程文件</h3>\n              <p className=\"upload-subtitle\">支持 PDF、Word、PPT、圖片等格式，最大 20MB</p>\n              <button className=\"upload-button\" onClick={() => document.getElementById('fileUpload').click()}>\n                <i className=\"fas fa-plus\"></i> 選擇文件\n              </button>\n              <input \n                type=\"file\" \n                id=\"fileUpload\" \n                style={{ display: 'none' }} \n                onChange={handleFileUpload}\n                multiple \n              />\n            </div>\n\n            {/* 文件列表 */}\n            <div className=\"files-section\">\n              <div className=\"section-header\">\n                <h3 className=\"section-title\">\n                  {activeCategory === 'all' ? '所有文件' : \n                    targetSchools.find(s => s.code === activeCategory)?.name + ' 申請資料'}\n                </h3>\n              </div>\n              \n              <ul className=\"files-list\">\n                {files\n                  .filter(file => activeCategory === 'all' || file.school === activeCategory)\n                  .map((file, index) => (\n                    <li key={file.id} className=\"file-item\" data-school={file.school} data-type={file.type}>\n                      <div className=\"checkbox-container\">\n                        <input type=\"radio\" name=\"fileSelect\" id={`file${file.id}`} />\n                      </div>\n                      <div className=\"file-icon\">\n                        <i className=\"fas fa-file-pdf\"></i>\n                      </div>\n                      <div className=\"file-details\">\n                        <div className=\"file-name\">{file.name}</div>\n                        <div className=\"file-meta\">{file.size} · 上傳於 {file.uploadDate}</div>\n                      </div>\n                      <span className={`file-status status-${file.status}`}>\n                        {file.status === 'analyzed' ? \n                          `已分析 · ${file.analysisDate} · 評分: ${file.score}` : \n                          '待分析'}\n                      </span>\n                      <button className=\"delete-btn\">\n                        <i className=\"fas fa-trash\"></i>\n                      </button>\n                    </li>\n                  ))}\n              </ul>\n              \n              <div className=\"analyze-footer\">\n                <button className=\"analysis-button\" onClick={handleAnalyzeClick}>\n                  <i className=\"fas fa-robot\"></i> AI 分析所選文件\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 上傳配置模態框 */}\n      {isModalOpen && (\n        <div className=\"modal active\">\n          <div className=\"modal-content\" style={{ maxWidth: '500px' }}>\n            <div className=\"modal-header\">\n              <h3 className=\"modal-title\">設定文件屬性</h3>\n              <button className=\"close-btn\" onClick={() => setIsModalOpen(false)}>\n                <i className=\"fas fa-times\"></i>\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"upload-form\">\n                <div className=\"form-group\">\n                  <label htmlFor=\"schoolSelect\">選擇志願學校系所：</label>\n                  <select \n                    id=\"schoolSelect\" \n                    className=\"form-control\"\n                    value={selectedSchool}\n                    onChange={(e) => setSelectedSchool(e.target.value)}\n                  >\n                    <option value=\"\">請選擇學校系所...</option>\n                    {targetSchools.map(school => (\n                      <option key={school.id} value={school.code}>\n                        {school.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>選擇文件類型：</label>\n                  <div className=\"radio-group\">\n                    <label className=\"radio-label\">\n                      <input \n                        type=\"radio\" \n                        name=\"documentType\" \n                        value=\"learning\"\n                        checked={documentType === 'learning'}\n                        onChange={(e) => setDocumentType(e.target.value)}\n                      />\n                      <span>學習歷程自述</span>\n                    </label>\n                    <label className=\"radio-label\">\n                      <input \n                        type=\"radio\" \n                        name=\"documentType\" \n                        value=\"diversity\"\n                        checked={documentType === 'diversity'}\n                        onChange={(e) => setDocumentType(e.target.value)}\n                      />\n                      <span>多元表現</span>\n                    </label>\n                  </div>\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>選擇的文件：</label>\n                  <div className=\"selected-file-name\">\n                    {selectedFile ? selectedFile.name : '尚未選擇文件'}\n                  </div>\n                </div>\n                \n                <div className=\"form-group\">\n                  <label>最終檔案名稱：</label>\n                  <div className=\"final-file-name\">\n                    {selectedFile && selectedSchool ? \n                      `${targetSchools.find(s => s.code === selectedSchool)?.name}-${\n                        documentType === 'learning' ? '學習歷程自述' : '多元表現'\n                      }.${selectedFile.name.split('.').pop()}` : \n                      '-'}\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"modal-btn btn-secondary\" onClick={() => setIsModalOpen(false)}>\n                取消\n              </button>\n              <button className=\"modal-btn btn-primary\" onClick={handleConfirmUpload}>\n                確認上傳\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}